# üìä Binance OrderBook Data Collector

–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö orderbook —Å –±–∏—Ä–∂–∏ Binance –¥–ª—è 200 —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º –Ω–∞ Digital Ocean.

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è:
- **–°–±–æ—Ä–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö orderbook** —Å –±–∏—Ä–∂–∏ Binance —á–µ—Ä–µ–∑ WebSocket API (~9,000 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω—É—Ç—É)
- **–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è –≤ PostgreSQL** –Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Digital Ocean
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ 200 —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä** —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–µ–π Docker
- **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è REST API** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏ –º–∏—Ä–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)

### ‚ö° –£–¥–∞–ª–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/demetrius2017/DATA_Storage.git
cd DATA_Storage

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
./scripts/install_dependencies.sh

# –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_SERVER_IP)
./scripts/deploy_remote_collector.sh YOUR_SERVER_IP

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
python scripts/remote_collector_client.py --server http://YOUR_SERVER_IP start \
    --symbols BTCUSDT ETHUSDT SOLUSDT \
    --database-url "postgresql://user:pass@host:port/db"
```

### üê≥ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (legacy)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/demetrius2017/DATA_Storage.git
cd DATA_Storage

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
chmod +x manage.sh
./manage.sh deploy
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [collector/docs/deployment_guide.md](collector/docs/deployment_guide.md)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

```
Digital Ocean Infrastructure
‚îú‚îÄ‚îÄ Droplet (4GB RAM, 2 vCPU)          # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ Docker Containers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orderbook-collector        # –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (200 —Å–∏–º–≤–æ–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fastapi-server             # REST API 
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prometheus                 # –ú–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ grafana                    # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ Nginx Proxy                    # Load balancer
‚îî‚îÄ‚îÄ Managed PostgreSQL (1GB RAM)       # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    ‚îú‚îÄ‚îÄ SSL Connections
    ‚îú‚îÄ‚îÄ Automatic Backups
    ‚îî‚îÄ‚îÄ Global Access
```

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä—ã

**200 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä Binance Futures:**

```python
# –¢–æ–ø-20 –ø–æ –æ–±—ä–µ–º–∞–º (–≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω—ã)
TIER_1 = ["BTCUSDT", "ETHUSDT", "BNBUSDT", "SOLUSDT", "XRPUSDT", ...]

# –ê–ª—å—Ç–∫–æ–π–Ω—ã (50 –ø–∞—Ä)
TIER_2 = ["ADAUSDT", "DOGEUSDT", "MATICUSDT", "LINKUSDT", ...]

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ (130 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä)
TIER_3 = [...] 
```

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫:** [collector/config/symbols.py](collector/config/symbols.py)

## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É:

| –°–µ—Ä–≤–∏—Å | URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----|-----------|
| **REST API** | `http://YOUR_IP:8080` | –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º orderbook |
| **Remote Management** | `http://YOUR_IP:8000` | –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º |
| **Grafana** | `http://YOUR_IP:3000` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∞—à–±–æ—Ä–¥—ã |
| **Prometheus** | `http://YOUR_IP:9090` | –ú–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã |

## üéÆ –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
./scripts/deploy_remote_collector.sh YOUR_SERVER_IP root

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ª–æ–∫–∞–ª—å–Ω–æ
./scripts/install_dependencies.sh
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞
python scripts/remote_collector_client.py --server http://YOUR_IP summary

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
python scripts/remote_collector_client.py --server http://YOUR_IP start \
    --symbols BTCUSDT ETHUSDT SOLUSDT \
    --database-url "postgresql://..."

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä
python scripts/remote_collector_client.py --server http://YOUR_IP stop

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
python scripts/remote_collector_client.py --server http://YOUR_IP monitor --duration 30

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¢–ó
python scripts/remote_collector_client.py --server http://YOUR_IP validate
```

### Web Dashboard –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–µ–Ω –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π dashboard:

- **Management Dashboard**: `http://YOUR_IP:8000/`
- **Real-time Monitoring**: WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- **API Documentation**: `http://YOUR_IP:8000/docs`

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¢–ó

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ–±–∏—Ä–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é:

- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π –∏ —Ç–∏–ø–æ–≤
- ‚úÖ **–°–≤–µ–∂–µ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å—Ç–∞—Ä—à–µ 5 –º–∏–Ω—É—Ç  
- ‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö**: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ NULL –∑–Ω–∞—á–µ–Ω–∏–π, –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ü–µ–Ω
- ‚úÖ **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**: –º–∏–Ω–∏–º—É–º 1 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Ç—É –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

## üìà API Endpoints

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö orderbook

```bash
# –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ BTCUSDT
curl http://YOUR_IP:8080/data/BTCUSDT

# –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–µ—Ä–∏–æ–¥
curl "http://YOUR_IP:8080/data/BTCUSDT?from=2024-01-01T00:00:00Z&to=2024-01-01T01:00:00Z"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤
curl http://YOUR_IP:8080/stats

# –ó–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã
curl http://YOUR_IP:8080/health
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ API

```json
{
  "symbol": "BTCUSDT",
  "timestamp": 1703875200.123,
  "bids": [
    {"price": "43500.00", "quantity": "0.15", "level": 0},
    {"price": "43499.99", "quantity": "0.25", "level": 1}
  ],
  "asks": [
    {"price": "43500.01", "quantity": "0.20", "level": 0},
    {"price": "43500.02", "quantity": "0.30", "level": 1}
  ],
  "spread": "0.01",
  "mid_price": "43500.005"
}
```

## üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

### –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
./scripts/deploy_remote_collector.sh YOUR_SERVER_IP

# –ó–∞–ø—É—Å–∫ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
python scripts/remote_collector_client.py --server http://YOUR_IP start \
    --symbols BTCUSDT ETHUSDT SOLUSDT \
    --database-url "postgresql://..."

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
python scripts/remote_collector_client.py --server http://YOUR_IP monitor

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –¢–ó
python scripts/remote_collector_client.py --server http://YOUR_IP validate

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python scripts/remote_collector_client.py --server http://YOUR_IP db-stats
```

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (legacy)

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./manage.sh status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
./manage.sh logs collector

# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤
./manage.sh scale 100

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
./manage.sh restart

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
./manage.sh monitor

# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
./manage.sh backup
```

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —ç—Ç–∞–ø–∞–º

```bash
# –≠—Ç–∞–ø 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (3 —Å–∏–º–≤–æ–ª–∞)
./manage.sh scale 3

# –≠—Ç–∞–ø 2: –ü–∏–ª–æ—Ç (50 —Å–∏–º–≤–æ–ª–æ–≤) 
./manage.sh scale 50

# –≠—Ç–∞–ø 3: –ü—Ä–æ–¥–∞–∫—à–µ–Ω (200 —Å–∏–º–≤–æ–ª–æ–≤)
./manage.sh scale 200
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

### –û–∂–∏–¥–∞–µ–º–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | 50 —Å–∏–º–≤–æ–ª–æ–≤ | 200 —Å–∏–º–≤–æ–ª–æ–≤ |
|----------|-------------|---------------|
| **–°–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω** | ~2,250 | ~9,000 |
| **–î–∞–Ω–Ω—ã—Ö/–¥–µ–Ω—å** | ~100MB | ~400MB |
| **–î–∞–Ω–Ω—ã—Ö/–º–µ—Å—è—Ü** | ~3GB | ~12GB |
| **CPU Usage** | 15-25% | 30-50% |
| **Memory Usage** | 30-40% | 60-80% |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **Connection Pooling**: 20 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ PostgreSQL
- **Batch Processing**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ 100 –∑–∞–ø–∏—Å–µ–π
- **Compression**: –°–∂–∞—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
- **Indexing**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ø–æ timestamp –∏ symbol

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ PostgreSQL
- ‚úÖ Firewall –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã)
- ‚úÖ READ-ONLY API –∫–ª—é—á–∏ Binance
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ credentials –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ Non-root –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Docker

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ Health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Graceful shutdown –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã PostgreSQL
- ‚úÖ Monitoring —Å –∞–ª–µ—Ä—Ç–∞–º–∏ –≤ Grafana

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å—è—Ü |
|-----------|--------------|-----------------|
| **Droplet** | 4GB RAM, 2 vCPU, 80GB SSD | $24 |
| **PostgreSQL** | 1GB RAM, 10GB Storage | $15 |
| **Backup Space** | 20GB | $2 |
| **Total** | | **$41/–º–µ—Å—è—Ü** |

*–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è 200 —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä —Å –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π*

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

```bash
# 2GB Droplet + Shared PostgreSQL
# 3-10 —Å–∏–º–≤–æ–ª–æ–≤
# ~$15/–º–µ—Å—è—Ü
```

### –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# 4GB Droplet + Managed PostgreSQL
# 50-200 —Å–∏–º–≤–æ–ª–æ–≤  
# ~$41/–º–µ—Å—è—Ü
```

### Enterprise –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# 8GB Droplet + High-Performance PostgreSQL
# 200+ —Å–∏–º–≤–æ–ª–æ–≤ —Å high-frequency –¥–∞–Ω–Ω—ã–º–∏
# ~$85/–º–µ—Å—è—Ü
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Grafana

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã

1. **System Overview**
   - CPU, Memory, Disk usage
   - Network I/O
   - Container status

2. **OrderBook Metrics**
   - Messages per minute by symbol
   - WebSocket connection status
   - Data processing latency

3. **Database Performance**
   - PostgreSQL connections
   - Query performance
   - Storage growth

4. **Business Metrics**
   - Market coverage (active symbols)
   - Data quality scores
   - Uptime statistics

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
git clone https://github.com/demetrius2017/DATA_Storage.git
cd DATA_Storage

# –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
pip install -r requirements.txt

# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å 1 —Å–∏–º–≤–æ–ª–æ–º
python -m collector.main --symbol BTCUSDT --output-dir ./data

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/ -v
```

### Docker –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
docker-compose -f docker-compose.local.yml up --build

# –¢–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
docker-compose -f docker-compose.local.yml up postgres

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å hot-reload
docker-compose -f docker-compose.dev.yml up
```

## üìã Roadmap

### ‚úÖ Phase 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [x] WebSocket –∫–æ–ª–ª–µ–∫—Ç–æ—Ä Binance
- [x] PostgreSQL –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è  
- [x] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [x] Digital Ocean —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### ‚úÖ Phase 2: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] 200 —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä
- [x] Batch processing
- [x] Connection pooling
- [x] Monitoring stack

### ‚úÖ Phase 3: –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- [x] REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º
- [x] WebSocket –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [x] Web Dashboard —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¢–ó
- [x] –°–∏—Å—Ç–µ–º—ã systemd –¥–ª—è production
- [x] –ö–ª–∏–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### üîÑ Phase 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
- [ ] Real-time –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] Machine Learning features
- [ ] Advanced alerting
- [ ] Performance tuning

### üìã Phase 4: Enterprise features
- [ ] Multi-region deployment
- [ ] Load balancing
- [ ] Advanced security
- [ ] Custom analytics

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### –î–ª—è –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–æ–≤

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –°–ª–µ–¥—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–æ–¥–∞ (PEP 8)
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
5. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
6. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Docker –∏ Docker Compose
- PostgreSQL –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- Binance API –∫–ª—é—á–∏ (testnet –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
DATA_Storage/
‚îú‚îÄ‚îÄ scripts/                          # –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ deploy_remote_collector.sh     # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ remote_collector_client.py     # –ö–ª–∏–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ install_dependencies.sh        # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ collector/                         # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ management/                    # –°–∏—Å—Ç–µ–º–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ collector_api.py           # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ validation/                    # –í–∞–ª–∏–¥–∞—Ü–∏—è –¢–ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data_validator.py          # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ingestion/                     # –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ docs/                          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ deployment_guide.md        # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
‚îú‚îÄ‚îÄ DEPLOYMENT_READY.md               # –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
‚îî‚îÄ‚îÄ README.md                         # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

1. **Quick Start Guide**: [QUICK_START.md](QUICK_START.md)
2. **Deployment Guide**: [CLOUD_DEPLOYMENT_GUIDE.md](CLOUD_DEPLOYMENT_GUIDE.md)
3. **GitHub Issues**: [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/demetrius2017/DATA_Storage/issues)
4. **Email –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: support@orderbook-collector.dev

### Troubleshooting

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./manage.sh status

# –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏
./manage.sh logs collector

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
curl http://YOUR_IP:8080/health
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

---

## üéâ –ù–∞—á–Ω–∏—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

**–£–¥–∞–ª–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (1-2 –∫–æ–º–∞–Ω–¥—ã):**

```bash
git clone https://github.com/demetrius2017/DATA_Storage.git && cd DATA_Storage && \
./scripts/install_dependencies.sh && \
./scripts/deploy_remote_collector.sh YOUR_SERVER_IP
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CLI:**

```bash
# –ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
python scripts/remote_collector_client.py --server http://YOUR_IP start \
    --symbols BTCUSDT ETHUSDT SOLUSDT --database-url "postgresql://..."

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
python scripts/remote_collector_client.py --server http://YOUR_IP monitor
```

**–í–∞—à —É–¥–∞–ª–µ–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π OrderBook –∫–æ–ª–ª–µ–∫—Ç–æ—Ä –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç!** üöÄ

---

*–°–æ–±–∏—Ä–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å 200 —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä Binance —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º, real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¢–ó. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è, –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ —Ä—ã–Ω–æ—á–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.*

–û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è: —Å–æ–±–∏—Ä–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ —Å—Ä–∞–∑—É –≤ PostgreSQL –ø–æ–¥ 200 –ø–∞—Ä, —á—Ç–æ–±—ã –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ ‚Äú–≤—á–µ—Ä–∞—à–Ω–µ–º‚Äù –∏ –±—ã—Å—Ç—Ä–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å ML. –ù–∏–∂–µ ‚Äî –ø—Ä–∞–∫—Ç–∏—á–Ω–∞—è —Å—Ö–µ–º–∞: —á—Ç–æ —Å–æ–±–∏—Ä–∞—Ç—å, –∫–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å, –∏–Ω–¥–µ–∫—Å—ã/–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±—ä—ë–º/–Ω–∞–≥—Ä—É–∑–∫–∞ –∏ –∫–∞–∫ —ç—Ç–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ —Ç–µ–∫—É—â–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω—É.

–ß—Ç–æ —Å–æ–±–∏—Ä–∞—Ç—å (–º–∏–Ω–∏–º—É–º ‚Üí —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ª—ë–≥–∫–∏–π, –ø–æ–ª–µ–∑–Ω—ã–π –≤—Å–µ–º –º–æ–¥–µ–ª—è–º):

bookTicker (top-of-book): best_bid, best_ask, bid_qty, ask_qty, event_time.
aggTrade (–∏–ª–∏ trade): —Ü–µ–Ω–∞/–æ–±—ä—ë–º —Å–¥–µ–ª–∫–∏, —Å—Ç–æ—Ä–æ–Ω–∞ –∞–≥—Ä–µ—Å—Å–æ—Ä–∞, event_time.
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–¥–ª—è –º–∏–∫—Ä–æ‚Äë—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Å–∏–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤):

depth5@100ms –∏–ª–∏ depth10@100ms: –º–∞—Å—Å–∏–≤—ã [price, qty] –Ω–∞ –ø–µ—Ä–≤—ã—Ö 5‚Äì10 —É—Ä–æ–≤–Ω—è—Ö + –¥–∏—Ñ—Ñ—ã.
mark price/funding (–¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤): —Å–æ–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è mark price –∏ funding (–∫–∞–∂–¥—ã–µ 8—á).
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –Ω–∞ —Å—Ç–∞—Ä—Ç:

–î–ª—è –≤—Å–µ—Ö 200 –ø–∞—Ä: bookTicker + aggTrade (–Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∏–∑–∫–∞—è/—Å—Ä–µ–¥–Ω—è—è).
–î–ª—è —Ç–æ–ø‚ÄëN –ª–∏–∫–≤–∏–¥–Ω—ã—Ö –ø–∞—Ä: depth5@100ms. –ü–æ –º–µ—Ä–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ ‚Äî —Ä–∞—Å—à–∏—Ä—è—Ç—å –Ω–∞ –±–æ–ª—å—à–µ–µ —á–∏—Å–ª–æ –ø–∞—Ä.
–°—Ö–µ–º–∞ –ë–î (PostgreSQL/Timescale)
–°—Ä–∞–∑—É –¥–µ–ª–∞–π—Ç–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é —Å–∏–º–≤–æ–ª–æ–≤ –∏ –∫–ª—é—á–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤ UTC. –î–ª—è –≤—ã—Å–æ–∫–∏—Ö —Å–∫–æ—Ä–æ—Å—Ç–µ–π ‚Äî TimescaleDB (hypertable) –∏ –∫–æ–º–ø—Ä–µ—Å—Å–∏—è —Å—Ç–∞—Ä—ã—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π. –ï—Å–ª–∏ TimescaleDB –ø–æ–∫–∞ –Ω–µ—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ natively PARTITION BY RANGE (–ø–æ –¥–∞—Ç–µ) + –∏–Ω–¥–µ–∫—Å –Ω–∞ (symbol_id, ts).

–°—Ö–µ–º–∞ marketdata:

–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
marketdata.symbols
id bigserial PK
exchange text not null (e.g., 'binance-futures', 'binance-spot')
symbol text not null (e.g., 'SOLUSDT')
instrument_type text (e.g., 'perp', 'spot') null
base_asset text, quote_asset text null
is_active boolean default true
UNIQUE (exchange, symbol)
–ü–æ—Ç–æ–∫ top-of-book (bookTicker)
marketdata.book_ticker
ts_exchange timestamptz not null ‚Äî –∏–∑ –ø–æ–ª—è E/1000 (UTC)
ts_ingest timestamptz not null default now()
symbol_id bigint not null references marketdata.symbols(id)
update_id bigint null ‚Äî –ø–æ–ª–µ u (–µ—Å–ª–∏ –µ—Å—Ç—å)
best_bid double precision not null
best_ask double precision not null
bid_qty double precision not null
ask_qty double precision not null
spread double precision not null ‚Äî best_ask ‚àí best_bid
mid double precision not null ‚Äî (best_ask + best_bid)/2
PRIMARY KEY (symbol_id, ts_exchange, update_id) ‚Äî –µ—Å–ª–∏ u –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –º–æ–∂–Ω–æ PK(symbol_id, ts_exchange, ts_ingest)
INDEX (symbol_id, ts_exchange)
–°–¥–µ–ª–∫–∏ (aggTrade)
marketdata.trades
ts_exchange timestamptz not null ‚Äî –∏–∑ E/1000
ts_ingest timestamptz not null default now()
symbol_id bigint not null
agg_trade_id bigint not null ‚Äî a
price double precision not null ‚Äî p
qty double precision not null ‚Äî q
is_buyer_maker boolean not null ‚Äî m
PRIMARY KEY (symbol_id, agg_trade_id)
INDEX (symbol_id, ts_exchange)
–°–æ–±—ã—Ç–∏—è –≥–ª—É–±–∏–Ω—ã (depth updates) ‚Äî –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞
–í–∞—Ä–∏–∞–Ω—Ç –ê (–ø—Ä–æ—Å—Ç–æ–π, –±—ã—Å—Ç—Ä—ã–π –¥–ª—è ingestion): —Ö—Ä–∞–Ω–∏—Ç—å raw JSONB –Ω–∞ —Å–æ–±—ã—Ç–∏–µ:

marketdata.depth_events
ts_exchange timestamptz not null ‚Äî E/1000
ts_ingest timestamptz not null default now()
symbol_id bigint not null
first_update_id bigint not null ‚Äî U
final_update_id bigint not null ‚Äî u
prev_final_update_id bigint null ‚Äî pu
bids jsonb not null ‚Äî –º–∞—Å—Å–∏–≤ –º–∞—Å—Å–∏–≤–æ–≤ [["price","qty"], ...] –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ —á–∏—Å–ª–∞
asks jsonb not null
PRIMARY KEY (symbol_id, final_update_id)
INDEX (symbol_id, ts_exchange)
–í–∞—Ä–∏–∞–Ω—Ç –ë (—Å—Ä–∞–∑—É ‚Äú—É–¥–æ–±–Ω–æ –¥–ª—è —Ñ–∏—á‚Äù): —Ö—Ä–∞–Ω–∏—Ç—å top‚ÄëN –≤ –ø–ª–æ—Å–∫–æ–º –≤–∏–¥–µ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º

marketdata.orderbook_topN
ts_exchange timestamptz not null
symbol_id bigint not null
b1_price double precision, b1_qty double precision, ..., bN_price, bN_qty
a1_price double precision, a1_qty double precision, ..., aN_price, aN_qty
–ø–µ—Ä–≤–∏—á–Ω—ã–µ derived —Ñ–∏—á–∏: i1, iN, microprice, wall_size, wall_dist_bps, ‚Ä¶
PRIMARY KEY (symbol_id, ts_exchange)
INDEX (symbol_id, ts_exchange)
–û–±—ã—á–Ω–æ –Ω–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ñ–æ–Ω–æ–≤—ã–º job‚Äô–æ–º –∏–∑ depth_events (raw‚Üífeatures). –≠—Ç–æ —Ä–∞–∑–≥—Ä—É–∂–∞–µ—Ç ingestion –∏ —É–ø—Ä–æ—â–∞–µ—Ç —ç–≤–æ–ª—é—Ü–∏—é —Ñ–∏—á.
–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã (–¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö ‚Äú–≤—á–µ—Ä–∞—à–Ω–∏—Ö‚Äù –æ–±—É—á–µ–Ω–∏–π)
marketdata.bt_1s (–∏–ª–∏ hypertable) ‚Äî —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥ book_ticker –≤ 1s:
ts_second timestamptz, symbol_id
mid_open, mid_high, mid_low, mid_close, spread_mean, ‚Ä¶
marketdata.trade_1s ‚Äî –∞–≥—Ä –ø–æ —Å–¥–µ–ª–∫–∞–º:
ts_second, symbol_id
trade_count, vol_sum, vwap, imbalance_buy_sell, ‚Ä¶
marketdata.depth_100ms_topN ‚Äî –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–≤–µ—Ä—Ö—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –æ—Ñ—Ñ–ª–∞–π–Ω (—Ç–æ–Ω–∫–æ)
–†–æ—Ç–∞—Ü–∏—è/–∫–æ–º–ø—Ä–µ—Å—Å–∏—è:

book_ticker/trades: —Ö—Ä–∞–Ω–∏—Ç—å ‚Äú—Å—ã—Ä–æ–µ‚Äù 7‚Äì30 –¥–Ω–µ–π (Timescale compress + retention policy).
depth_events (—Å—ã—Ä–∞—è –≥–ª—É–±–∏–Ω–∞): –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ä—ë–º–Ω–æ–π ‚Äî 3‚Äì7 –¥–Ω–µ–π –≤ —Å—ã—Ä–æ–º –≤–∏–¥–µ + derived topN/—Ñ–∏—á–∏ —Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–ª—å—à–µ (30‚Äì90 –¥–Ω–µ–π) —Å –∫–æ–º–ø—Ä–µ—Å—Å–∏–µ–π.
–∞–≥—Ä–µ–≥–∞—Ç—ã 1s/100ms ‚Äî –¥–æ–ª—å—à–µ (90‚Äì180 –¥–Ω–µ–π), –æ–Ω–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫.
–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ —Ç–∏–ø–∞–º:

double precision ‚Äî –±—ã—Å—Ç—Ä—ã–π. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å ‚Äî numeric(20,10) –Ω–∞ price/qty, –Ω–æ —Ü–µ–Ω–∞ –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏. –î–ª—è ML –æ–±—ã—á–Ω–æ double –æ–∫.
–í—Å–µ–≥–¥–∞ UTC (timestamptz), –∏–Ω–¥–µ–∫—Å—ã –ø–æ (symbol_id, ts_exchange).
–ù–∞–≥—Ä—É–∑–∫–∞, —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ ingestion
–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è WS:
Binance Combined Streams: wss://fstream.binance.com/stream?streams=... –ú–æ–∂–Ω–æ ‚Äú—Å—à–∏–≤–∞—Ç—å‚Äù –ø–æ 50‚Äì100 –ø–∞—Ä –Ω–∞ –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞–Ω–∞–ª–æ–≤).
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3‚Äì5 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ 200 –ø–∞—Ä (1‚Äì2 –¥–ª—è bookTicker, 1‚Äì2 –¥–ª—è aggTrade, 1 –¥–ª—è depth —Ç–æ–ø–æ–≤—ã—Ö –ø–∞—Ä).
Batching –≤ –ë–î:
–ü–∞–∫–µ—Ç–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ –∫–∞–∂–¥—ã–µ 50‚Äì500 –∑–∞–ø–∏—Å–µ–π (psycopg2 execute_values –∏–ª–∏ asyncpg copy_records_to_table).
–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫–æ—Ä–æ—Ç–∫–∏–µ, autocommit off.
–ò–Ω–¥–µ–∫—Å—ã: –∑–∞—Ä–∞–Ω–µ–µ, –Ω–æ –±–µ–∑ –ª–∏—à–Ω–∏—Ö; —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –¥—É–±–ª–µ–π.
–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:
TimescaleDB hypertable time(ts_exchange), partitioning by symbol_id (space partition).
–ï—Å–ª–∏ –±–µ–∑ Timescale: PARTITION BY RANGE (date_trunc('day', ts_exchange)) –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ —Å—É—Ç–∫–∏ (¬±—Ö—ç—à –ø–æ symbol_id).
–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:
–ò–¥—ë–º ‚Äúat least once‚Äù: –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏, UPSERT ON CONFLICT DO NOTHING/UPDATE –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏.
–õ–æ–≥–∏ ‚Äú–ø–æ—Å–ª–µ–¥–Ω–∏–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π update_id‚Äù per symbol –¥–ª—è depth (–≤ –ø–∞–º—è—Ç–∏ + –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É offsets).
‚Äú–í—á–µ—Ä–∞—à–Ω–∏–π‚Äù –¥–∞—Ç–∞—Å–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è ‚Äî –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø
–û–∫–Ω–æ: [00:00:00Z; 23:59:59Z] –≤—á–µ—Ä–∞. –î–ª—è SOLUSDT –∏/–∏–ª–∏ 200 –ø–∞—Ä.
–ë—Ä–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ:
–ò–∑ bt_1s –∏ trade_1s: –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π —Å–∫–∞–Ω –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏.
–î–ª—è depth ‚Äî –∏–∑ orderbook_topN –∏–ª–∏ –≥–æ—Ç–æ–≤—ã—Ö feature‚Äë—Ç–∞–±–ª–∏—Ü (—É–∂–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö I1/I10/microprice/OFI).
–î–ª—è –æ–±—É—á–µ–Ω–∏—è:
ML –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ symbol_id –∏ ts –¥–∏–∞–ø–∞–∑–æ–Ω, –¥–µ–ª–∞–µ—Ç SELECT‚Äô—ã –≤ —Ñ–∏—á‚Äë—Ç–∞–±–ª–∏—Ü–∞—Ö, —Å—Ç—Ä–æ–∏—Ç –º–∞—Ç—Ä–∏—Ü—É –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç—Ä–µ–Ω–∏–Ω–≥ –Ω–∞ –∂–∏–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞ ‚Äú–≤—á–µ—Ä–∞‚Äù.
–ü–æ—Ä–æ–≥/–∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ (Platt/Isotonic), –ª–æ–≥ –≤ –æ—Ç—á—ë—Ç.
–ë—ã—Å—Ç—Ä—ã–π DDL (—Å—Ö–µ–º–∞—Ç–∏—á–Ω–æ)
create schema marketdata;
symbols, book_ticker, trades ‚Äî –∫–∞–∫ –≤—ã—à–µ.
depth_events (jsonb) + orderbook_topN (—Ñ–∏—á–∏ —Å–≤–µ—Ä—Ö—É 5‚Äì10 —É—Ä–æ–≤–Ω–µ–π).
–ò–Ω–¥–µ–∫—Å—ã: (symbol_id, ts_exchange) –≤–µ–∑–¥–µ; PK –ø–æ–¥ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, trades –ø–æ agg_trade_id, depth –ø–æ final_update_id).
–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏ (–¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤)
–ù–∞ ingestion –Ω–µ –Ω–∞–≤–µ—à–∏–≤–∞–µ–º —Ç—è–∂—ë–ª—ã–µ —Ä–∞—Å—á—ë—Ç—ã. –°—á–∏—Ç–∞–µ–º ‚Äú–ª—ë–≥–∫–∏–µ‚Äù derived –ø–æ–ª—è (spread, mid). –í—Å—ë —Å–ª–æ–∂–Ω–æ–µ ‚Äî –≤ —Ñ–æ–Ω–æ–≤–æ–º job‚Äô–µ:

–ö–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç/—Å–µ–∫: –ø—Ä–æ–±–µ–≥–∞–µ–º depth_events –ø–æ –æ–∫–Ω—É –∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º orderbook_topN + —Ñ–∏—á–∏:
I1, I5/I10, microprice, max_wall_size/dist, OFI(T=1‚Äì3s), liquidity slope.
–ü–∏—à–µ–º –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ–∏—á‚Äë—Ç–∞–±–ª–∏—Ü—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, marketdata.features_100ms –∏–ª–∏ features_1s), –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π —Ç—Ä–µ–Ω–∏—Ä—É–µ–º ‚Äú–≤—á–µ—Ä–∞‚Äù –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ–º ‚Äú—Å–µ–≥–æ–¥–Ω—è‚Äù.
–û–±—ä—ë–º—ã –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å
bookTicker: —É —Ç–æ–ø‚Äë–ø–∞—Ä 30‚Äì150 updates/sec, —É –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äî <1/sec. –í —Å—Ä–µ–¥–Ω–µ–º –ø–æ 200 –ø–∞—Ä–∞–º –ø–æ—Ç–æ–∫ –ø—Ä–∏–µ–º–ª–µ–º –ø—Ä–∏ –±–∞—Ç—á–∏–Ω–≥–µ.
depth@100ms: —Ç—è–∂—ë–ª—ã–π ‚Äî –¥–µ–ª–∞–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ 20‚Äì50 —Å–∞–º—ã—Ö –ª–∏–∫–≤–∏–¥–Ω—ã—Ö –ø–∞—Ä; –æ—Å—Ç–∞–ª—å–Ω—ã–º ‚Äî –ø–æ–∑–∂–µ –∏–ª–∏ –Ω–∞ 250‚Äì500ms.
trades: —É–º–µ—Ä–µ–Ω–Ω–æ; –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è OFI –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏.
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–∫—É—â–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º
–ò–Ω–∂–µ—Å—Ç–æ—Ä: –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å (Python asyncio) c —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Ç–æ–∫–æ–≤ –∏ –±–∞—Ç—á‚Äë–∑–∞–ø–∏—Å—å—é –≤ PG.
–í copilot –¥–æ–±–∞–≤–∏—Ç—å –∞–¥–∞–ø—Ç–µ—Ä Postgres —Ä–∏–¥–µ—Ä–∞ (read‚Äëonly) –¥–ª—è ‚Äú–≤—á–µ—Ä–∞—à–Ω–∏—Ö‚Äù –≤—ã–±–æ—Ä–æ–∫ (–ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–∞ SELECT –≤–º–µ—Å—Ç–æ Parquet, –∫–æ–≥–¥–∞ –ë–î –≥–æ—Ç–æ–≤–∞).
–í MCP –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å read‚Äëonly –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (getOrderBookSnapshotFromDB, getTradesSlice) ‚Äî —Å–Ω–∞—á–∞–ª–∞ –æ–ø–∏—Å–∞—Ç—å –≤ mcp_server_spec.md, –ø–æ—Ç–æ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å.
–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏
–í–∫–ª—é—á–∏—Ç–µ autovacuum –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–ª–æ–∞—Ç–∏–Ω–≥–∞; –¥–ª—è Timescale ‚Äî –≤–∫–ª—é—á–∏—Ç—å –∫–æ–º–ø—Ä–µ—Å—Å–∏—é >7 –¥–Ω–µ–π.
–õ—é–±—ã–µ ‚Äúheavy‚Äù SELECT‚Äô—ã –≤ off-peak –≤—Ä–µ–º—è, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—É—Ç–∫–∏.
–•—Ä–∞–Ω–∏—Ç–µ ‚Äú—Å—ã—Ä–æ–π‚Äù JSONB depth –∏ –ø–ª–æ—Å–∫—É—é topN —Ç–∞–±–ª–∏—Ü—É ‚Äî —ç—Ç–æ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –≥–∏–±–∫–æ—Å—Ç—å—é –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é –æ–±—É—á–µ–Ω–∏—è.
–ò—Ç–æ–≥
–ò–¥–µ—è —Ü–µ–ª–∏–∫–æ–º ‚Äî –ê–¥–≤–æ–∫–∞—Ç –ó–ê:

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è live‚Äë–¥–∞–Ω–Ω—ã—Ö –≤ Postgres/Timescale –¥–ª—è 200 –ø–∞—Ä –¥–∞—ë—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π, —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ–º—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ ‚Äú–≤—á–µ—Ä–∞—à–Ω–µ–≥–æ‚Äù –æ–±—É—á–µ–Ω–∏—è –∏ –±—ã—Å—Ç—Ä–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ML.
–°—Ö–µ–º–∞ —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Å—ã—Ä—ã–µ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–¥—ë–∂–Ω–æ) –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Ñ–∏—á–∏ (–±—ã—Å—Ç—Ä–æ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏), —Å —Ä–µ—Ç–µ–Ω—à–µ–Ω–æ–º –∏ –∫–æ–º–ø—Ä–µ—Å—Å–∏–µ–π.
–°—Ç–∞—Ä—Ç —Å bookTicker+trades –¥–ª—è –≤—Å–µ—Ö –∏ –≥–ª—É–±–∏–Ω—ã –¥–ª—è —Ç–æ–ø‚Äë–ø–∞—Ä ‚Äî —Ä–∞–∑—É–º–Ω—ã–π –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ.
–ò–¥–µ—è —Ü–µ–ª–∏–∫–æ–º ‚Äî –ê–¥–≤–æ–∫–∞—Ç –ü–†–û–¢–ò–í:

Depth@100ms –ø–æ 200 –ø–∞—Ä–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—è–∂—ë–ª—ã–º –±–µ–∑ Timescale/–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è/–±–∞—Ç—á–∏–Ω–≥–∞.
–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ë–î —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ —Ä–∏–¥–µ—Ä–æ–≤ –∏ —Ñ–∏—á‚Äë–ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏/–≤–∞–ª–∏–¥–∞—Ü–∏–∏.
–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —á–∞—Å—Ç—å/–ø—Ä–∞–≤–∫–∏ ‚Äî –ê–¥–≤–æ–∫–∞—Ç –ó–ê:

–î–∞–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü, –∫–ª—é—á–∏, –∏–Ω–¥–µ–∫—Å—ã, —Ä–µ—Ç–µ–Ω—à–µ–Ω, –∏ –ø–ª–∞–Ω —Ñ–æ–Ω–æ–≤—ã—Ö roll‚Äëup‚Äô–æ–≤ –¥–ª—è ‚Äú–≤—á–µ—Ä–∞—à–Ω–µ–≥–æ‚Äù –æ–±—É—á–µ–Ω–∏—è.
–û–±–æ–∑–Ω–∞—á–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é ingestion (batch + UPSERT) –∏ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ WS.
–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —á–∞—Å—Ç—å/–ø—Ä–∞–≤–∫–∏ ‚Äî –ê–¥–≤–æ–∫–∞—Ç –ü–†–û–¢–ò–í:

–ù–µ –≤–∫–ª—é—á–µ–Ω—ã SQL‚Äë—Å–∫—Ä–∏–ø—Ç—ã —Ü–µ–ª–∏–∫–æ–º –∏ –∫–æ–¥ –∏–Ω–∂–µ—Å—Ç–æ—Ä–∞ ‚Äî —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥; –µ—Å—Ç—å –Ω—é–∞–Ω—Å—ã –ø–æ —á–∏—Å–ª–æ–≤—ã–º —Ç–∏–ø–∞–º/–∏–Ω–¥–µ–∫—Å–∞–º –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–∏–Ω—Ç–∞–∂–∏ PG/Timescale.
–ù–µ –æ–ø–∏—Å–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è high‚Äëavailability/replica –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏–º).
–í—ã–≤–æ–¥: –ø—Ä–µ–¥–ª–∞–≥–∞—é –Ω–∞—á–∞—Ç—å —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å—Ö–µ–º–µ marketdata (symbols, book_ticker, trades, depth_events) –∏ –±–∞—Ç—á‚Äë–∏–Ω–∂–µ—Å—Ç–æ—Ä–∞, –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä –Ω–∞ 200 –ø–∞—Ä (depth –Ω–∞ —Ç–æ–ø‚ÄëN), –∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 1‚Äì3 –¥–Ω–µ–π –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å ‚Äú–≤—á–µ—Ä–∞—à–Ω–∏–µ‚Äù —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ SELECT –∏–∑ Postgres. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é DDL –∏ –∫–∞—Ä–∫–∞—Å –∏–Ω–∂–µ—Å—Ç–æ—Ä–∞ –ø–æ–¥ asyncio + asyncpg —Å –±–∞—Ç—á‚Äë–≤—Å—Ç–∞–≤–∫–∞–º–∏ –∏ –ø—Ä–æ—Å—Ç—ã–º —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Ç–æ–∫–æ–≤.